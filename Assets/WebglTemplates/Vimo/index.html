<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Realit</title>
    <style>
      html,
      body {
        background: #000000;
        width: 100%;
        height: 100%;
        overflow: visible;
        padding: 0;
        margin: 0;
      }
  
      div#gameContainer {
        background: transparent !important;
        position: absolute;
      }
  
      div#gameContainer canvas {
        position: absolute;
      }
    </style>
  </head>
  <body>
    <div id="gameContainer">
      <video id="loader_article" autoplay muted playsinline loop
        src="https://vimo-immersive.com/wp-content/uploads/2023/07/Star-background.mp4"
        style="width: 100%; height: 100%; position:absolute; top:0; left:0;z-index:999;object-fit: cover;">
      </video>
      <canvas id="unity-canvas" data-pixel-art="false"></canvas>
      <script src="Build/{{{ LOADER_FILENAME }}}"></script>
      <script>
        var canvas = document.querySelector("#unity-canvas");
        var config = {
          dataUrl: "Build/{{{ DATA_FILENAME }}}",
          frameworkUrl: "Build/{{{ FRAMEWORK_FILENAME }}}",
          codeUrl: "Build/{{{ CODE_FILENAME }}}",
        #if MEMORY_FILENAME
          memoryUrl: "Build/{{{ MEMORY_FILENAME }}}",
        #endif
        #if SYMBOLS_FILENAME
          symbolsUrl: "Build/{{{ SYMBOLS_FILENAME }}}",
        #endif
          streamingAssetsUrl: "StreamingAssets",
          companyName: "{{{ COMPANY_NAME }}}",
          productName: "{{{ PRODUCT_NAME }}}",
          productVersion: "{{{ PRODUCT_VERSION }}}",
        };
        
        function OnAppReady() {
            var loader = document.getElementById("loader_article");
            if (loader == null) {
              console.log(("No loader was found"));
            }
            else {
              console.log(("Loader found"));
              loader.style.display = "none";
            }
          }
        function progressHandler(progress) { }
        function onResize() {
          var container = canvas.parentElement;
          var w = window.innerWidth;
          var h = window.innerHeight;

          container.style.width = canvas.style.width = w + "px";
          container.style.height = canvas.style.height = h + "px";
          container.style.top = Math.floor((window.innerHeight - h) / 2) + "px";
          container.style.left = Math.floor((window.innerWidth - w) / 2) + "px";
        }
        createUnityInstance(canvas, config, progressHandler)
        .then(function (instance) {
          canvas = instance.Module.canvas;
          onResize();

          canvas.addEventListener("blur", (event) => { instance.SendMessage("RealitWebgl", "GetMessage", "focus") });
          canvas.addEventListener("focus", (event) => { instance.SendMessage("RealitWebgl", "GetMessage", "nofocus") });

          // Touch or Mouse
          const isTouchDevice = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0);
          if (isTouchDevice) {
            instance.SendMessage("RealitWebgl", "GetMessage", "touchpad");
          } else {
            instance.SendMessage("RealitWebgl", "GetMessage", "mouse");
          }
        });
        window.addEventListener('resize', onResize);
        onResize();

        if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
          // Mobile device style: fill the whole browser client area with the game canvas:
          const meta = document.createElement('meta');
          meta.name = 'viewport';
          meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
          document.getElementsByTagName('head')[0].appendChild(meta);
        }
      </script>
    </div>
  </body>
</html>